<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <style>
        #Link {
            font-size: smaller;
        }
        .question
        .display {
            font-size : x-large;
            width: 100%;

        }
        .question
        .display input{
            display: inline;
        }
        
        .question
        .complete {
            display: none;
        }
    </style>
    <link href="../Content/normalize.css" rel="stylesheet" />
    <link href="../Content/skeleton.css" rel="stylesheet" />
    <script src="../Scripts/moment.js"></script>
    <script src="../Scripts/jquery-2.1.3.js"></script>
    <script src="MultQuiz.js"></script>
    <script>
        var $table;
        var objQParams;
        var currentQuiz;

        function init() {
            $table = $('table');

            params = window.location.search.substr(1).split('&');
            if (params[0]){
                for (var i = 0; i < params.length; i++) {
                    params[i] = params[i].split('=');
                }
            } else {
                params = null;
            }

            var numQ = getParam('numQ');
            var min = getParam('min') || 2;
            var max = getParam('max') || 10;

            if (numQ) {
                var quiz = new Quiz(numQ, min, max);
                document.body.removeChild(document.getElementById('QuizSetup'));
                document.body.appendChild(quiz.getDom());
                quiz.nextQ();
            }

            $('#QuizSetup input').change(updatePreview);
            updatePreview();
        }


        function makeQuiz() {
            objQParams = getQuizParams();
            currentQuiz = new Quiz(objQParams.numQ, objQParams.min, objQParams.max, objQParams.maxmin);

            $row = $('.row');
            $row.empty();
            var dom = currentQuiz.getDom();
            dom.className = "four columns offset-by-four";
            $('.row').append(dom);
        }

        function getParam(name) {
            if (params) {
                for (var i = 0; i < params.length; i++) {
                    if (name === params[i][0]) {
                        return parseInt(params[i][1]);
                    }
                }
            }
        }
        function updatePreview() {
            var qParams = getQuizParams();

            // set the preview table
            $('td').css('background-color', 'white');

            for (var i = qParams.min; i <= qParams.max; i++) {
                $('.' + i).css('background-color', 'green');
            }
            for (var i = qParams.max + 1; i <= 10; i++) {
                $('.' + i).css('background-color', 'white');
            }
            for (var i = qParams.min - 1; i >= 0; i--) {
                $('.' + i).css('background-color', 'white');
            }

            $('td').each(function () {
                if (parseInt(this.classList[0]) > qParams.maxmin &&
                    parseInt(this.classList[1]) > qParams.maxmin) {
                    $(this).css('background-color', 'white');
                }
            });

            // set the link
            $('#Link').html(function () {
                var str = 'A quiz with this configuration can be loaded with this ';
                str += '<a href="';
                var link = window.location.href +
                            '?'                         +
                            'numQ=' + qParams.numQ + '&'+
                            'min=' + qParams.min + '&'  +
                            'max=' + qParams.max + '&'  +
                            'maxmin=' + qParams.maxmin;
                str += link;
                str += '">link</a>. ';
                str += 'Right click and copy location/copy shortcut to send the link someplace.';
                return str;
            }());
        }
        function getQuizParams() {
            var ret = {
                numQ : parseInt($('#NumQuestions').val()),
                max: parseInt($('#MaxNum').val()),
                min: parseInt($('#MinNum').val()),
                maxmin : parseInt($('#MaxMin').val())
            }
            return ret;
        }
        window.onload = init;
    </script>
    <style>
        #Table td{
            border: 1px solid rgb(199, 199, 199);
            text-align: center;
        }
    </style>
    <title>Multiplication Quizzery</title>
</head>
<body>
    <div class="container">
        
            <div style="padding-top: 50px;" class="row">
                
                <div id="QuizSetup">
                    <div class="four columns">
                        <h3>Quiz Setup:</h3>
                        <label for="NumQuestions">Number of Questions: </label>
                        <input type="number" autocomplete="off" id="NumQuestions" name="NumQuestions" value="10" />
                        <br />
                        <label for="MinNum">Smallest digit: </label>
                        <input type="number" autocomplete="off" id="MinNum" name="MinNum" value="0" />
                        <br />
                        <label for="MaxNum">Greatest digit: </label>
                        <input type="number" autocomplete="off" id="MaxNum" name="MaxNum" value="10" />
                        <br />
                        <label for="MaxMin">MaxMin: </label>
                        <input type="number" autocomplete="off" id="MaxMin" name="MaxMin" value="10" />
                        <br />
                        <button onclick="makeQuiz();">Make Quiz</button>
                        <br />
                        <p id="Link"></p>
                    </div>
                </div>
                <div class="eight columns">
                    <h4>Preview: </h4>
                    <p>Highlighted squares are eligible for the quiz.</p>
                    <table id="Table">
                        <tr>
                            <td>&times;</td>
                            <td>0</td>
                            <td>1</td>
                            <td>2</td>
                            <td>3</td>
                            <td>4</td>
                            <td>5</td>
                            <td>6</td>
                            <td>7</td>
                            <td>8</td>
                            <td>9</td>
                            <td>10</td>
                        </tr>
                        <tr>
                            <td>0</td>
                            <td class="0 0"></td>
                            <td class="0 1"></td>
                            <td class="0 2"></td>
                            <td class="0 3"></td>
                            <td class="0 4"></td>
                            <td class="0 5"></td>
                            <td class="0 6"></td>
                            <td class="0 7"></td>
                            <td class="0 8"></td>
                            <td class="0 9"></td>
                            <td class="0 10"></td>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td class="1 0"></td>
                            <td class="1 1"></td>
                            <td class="1 2"></td>
                            <td class="1 3"></td>
                            <td class="1 4"></td>
                            <td class="1 5"></td>
                            <td class="1 6"></td>
                            <td class="1 7"></td>
                            <td class="1 8"></td>
                            <td class="1 9"></td>
                            <td class="1 10"></td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td class="2 0"></td>
                            <td class="2 1"></td>
                            <td class="2 2"></td>
                            <td class="2 3"></td>
                            <td class="2 4"></td>
                            <td class="2 5"></td>
                            <td class="2 6"></td>
                            <td class="2 7"></td>
                            <td class="2 8"></td>
                            <td class="2 9"></td>
                            <td class="2 10"></td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td class="3 0"></td>
                            <td class="3 1"></td>
                            <td class="3 2"></td>
                            <td class="3 3"></td>
                            <td class="3 4"></td>
                            <td class="3 5"></td>
                            <td class="3 6"></td>
                            <td class="3 7"></td>
                            <td class="3 8"></td>
                            <td class="3 9"></td>
                            <td class="3 10"></td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td class="4 0"></td>
                            <td class="4 1"></td>
                            <td class="4 2"></td>
                            <td class="4 3"></td>
                            <td class="4 4"></td>
                            <td class="4 5"></td>
                            <td class="4 6"></td>
                            <td class="4 7"></td>
                            <td class="4 8"></td>
                            <td class="4 9"></td>
                            <td class="4 10"></td>
                        </tr>
                        <tr>
                            <td>5</td>
                            <td class="5 0"></td>
                            <td class="5 1"></td>
                            <td class="5 2"></td>
                            <td class="5 3"></td>
                            <td class="5 4"></td>
                            <td class="5 5"></td>
                            <td class="5 6"></td>
                            <td class="5 7"></td>
                            <td class="5 8"></td>
                            <td class="5 9"></td>
                            <td class="5 10"></td>
                        </tr>
                        <tr>
                            <td>6</td>
                            <td class="6 0"></td>
                            <td class="6 1"></td>
                            <td class="6 2"></td>
                            <td class="6 3"></td>
                            <td class="6 4"></td>
                            <td class="6 5"></td>
                            <td class="6 6"></td>
                            <td class="6 7"></td>
                            <td class="6 8"></td>
                            <td class="6 9"></td>
                            <td class="6 10"></td>
                        </tr>
                        <tr>
                            <td>7</td>
                            <td class="7 0"></td>
                            <td class="7 1"></td>
                            <td class="7 2"></td>
                            <td class="7 3"></td>
                            <td class="7 4"></td>
                            <td class="7 5"></td>
                            <td class="7 6"></td>
                            <td class="7 7"></td>
                            <td class="7 8"></td>
                            <td class="7 9"></td>
                            <td class="7 10"></td>
                        </tr>
                        <tr>
                            <td>8</td>
                            <td class="8 0"></td>
                            <td class="8 1"></td>
                            <td class="8 2"></td>
                            <td class="8 3"></td>
                            <td class="8 4"></td>
                            <td class="8 5"></td>
                            <td class="8 6"></td>
                            <td class="8 7"></td>
                            <td class="8 8"></td>
                            <td class="8 9"></td>
                            <td class="8 10"></td>
                        </tr>
                        <tr>
                            <td>9</td>
                            <td class="9 0"></td>
                            <td class="9 1"></td>
                            <td class="9 2"></td>
                            <td class="9 3"></td>
                            <td class="9 4"></td>
                            <td class="9 5"></td>
                            <td class="9 6"></td>
                            <td class="9 7"></td>
                            <td class="9 8"></td>
                            <td class="9 9"></td>
                            <td class="9 10"></td>
                        </tr>
                        <tr>
                            <td>10</td>
                            <td class="10 0"></td>
                            <td class="10 1"></td>
                            <td class="10 2"></td>
                            <td class="10 3"></td>
                            <td class="10 4"></td>
                            <td class="10 5"></td>
                            <td class="10 6"></td>
                            <td class="10 7"></td>
                            <td class="10 8"></td>
                            <td class="10 9"></td>
                            <td class="10 10"></td>
                        </tr>
                    </table>
                </div>
            </div>
        
    </div>
</body>
</html>
